<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nemino - Game Time WoW</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0a0000;--card:#1a0000;--accent:#ff1f1f;--glow:#ff4444;--gold:#ffd700;--green:#00ff00;--text:#eee;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{background:var(--bg);color:var(--text);font-family:'Vazirmatn',sans-serif;min-height:100vh;overflow-x:hidden;position:relative;}

    /* ذرات آتش و خاکستر خفن */
    .particles{position:fixed;inset:0;pointer-events:none;z-index:0;}
    .ash{position:absolute;width:4px;height:4px;background:#333;border-radius:50%;opacity:0;animation:ash-rise 18s linear infinite;}
    .spark{position:absolute;width:3px;height:3px;background:#ff3333;border-radius:50%;box-shadow:0 0 18px #ff0000;opacity:0;animation:spark-rise 12s linear infinite;}
    @keyframes ash-rise{0%{transform:translateY(100vh) rotate(0deg);opacity:0;}10%{opacity:0.6;}80%{opacity:0.1;}100%{transform:translateY(-120px) rotate(720deg);opacity:0;}}
    @keyframes spark-rise{0%{transform:translateY(100vh) scale(0);opacity:0;}15%{opacity:1;transform:translateY(70vh) scale(1);}100%{transform:translateY(-100px) scale(0);opacity:0;}}

    /* دکمه بازگشت بالا راست */
    .back-btn{
      position:fixed;top:20px;right:20px;background:linear-gradient(45deg,#330000,#cc0000);color:#fff;padding:16px 38px;border-radius:50px;
      border:4px solid #ff3333;display:flex;align-items:center;gap:14px;font-weight:bold;font-size:1.2rem;
      box-shadow:0 0 60px rgba(255,0,0,0.95);text-decoration:none;transition:.4s;cursor:pointer;z-index:1000;
    }
    .back-btn:hover{transform:translateX(10px);box-shadow:0 0 90px rgba(255,0,0,1);}

    /* لوگو پایین راست */
    .logo-fixed{
      position:fixed;bottom:20px;right:20px;z-index:1000;
    }
    .logo-fixed img{height:75px;filter:drop-shadow(0 0 45px #ff0000);transition:.4s;}
    .logo-fixed img:hover{transform:scale(1.35) rotate(15deg);}

    /* عنوان نئونی */
    .neon-title{
      text-align:center;margin:110px auto 70px;font-family:'Orbitron',sans-serif;
      font-size:3.4rem;color:#0ff;letter-spacing:14px;
      text-shadow:0 0 20px #0ff,0 0 40px #0ff,0 0 80px #0ff,0 0 160px #0ff;
      animation:neon 3s infinite alternate;
    }
    @keyframes neon{from{text-shadow:0 0 20px #0ff,0 0 40px #0ff;}to{text-shadow:0 0 40px #0ff,0 0 80px #0ff,0 0 160px #0ff;}}

    /* آیکون سبد خرید جدید و خفن */
    .cart-icon{
      position:fixed;top:20px;left:20px;width:72px;height:72px;background:linear-gradient(45deg,#440000,#990000);
      border:5px solid #ff3333;border-radius:50%;display:flex;align-items:center;justify-content:center;
      box-shadow:0 0 80px rgba(255,51,51,1);cursor:pointer;z-index:1000;transition:all .4s;
    }
    .cart-icon:hover{transform:scale(1.25);box-shadow:0 0 120px rgba(255,51,51,1);}
    .cart-icon svg{width:44px;height:44px;fill:#fff;}

    /* سبد خرید بازشو */
    .cart-hud{
      position:fixed;top:100px;left:20px;width:360px;background:linear-gradient(135deg,#1a0000,#2d0000);
      border:6px solid #440000;border-radius:40px;padding:22px;z-index:999;box-shadow:0 0 120px rgba(255,0,0,1);
      opacity:0;visibility:hidden;transform:translateY(-20px);transition:all .4s;
    }
    .cart-hud.active{opacity:1;visibility:visible;transform:translateY(0);}

    .cart-hud h2{color:var(--gold);text-align:center;margin-bottom:18px;text-shadow:0 0 30px var(--glow);font-size:1.8rem;}
    .cart-items{max-height:50vh;overflow-y:auto;padding:8px;}
    .cart-item{
      background:#000;padding:12px 16px;border-radius:16px;margin:10px 0;display:flex;align-items:center;gap:14px;
      border:1px dashed #666;font-size:0.95rem;line-height:1.5;
    }
    .cart-item img{width:60px;height:60px;object-fit:cover;border-radius:12px;}
    .cart-item-info{flex:1;}
    .cart-item-info strong{color:var(--gold);font-size:0.98rem;display:block;margin-bottom:2px;}
    .cart-item-info span{font-size:0.9rem;color:#ccc;}

    /* فقط آیکون سطل زباله */
    .trash-btn{
      background:transparent;border:none;color:#ff3333;font-size:1.8rem;cursor:pointer;transition:.3s;
      filter:drop-shadow(0 0 14px #ff0000);
    }
    .trash-btn:hover{transform:scale(1.6) rotate(20deg);}

    /* قیمت و دکمه ادامه همیشه دیده میشه */
    .cart-footer{
      background:#000;padding:16px;border-radius:18px;margin-top:20px;text-align:center;
      border:2px dashed var(--accent);position:relative;
    }
    .cart-footer strong{font-size:2.2rem;color:var(--accent);text-shadow:0 0 30px #ff0000;}
    .continue-btn{
      margin-top:16px;width:100%;padding:16px;background:linear-gradient(45deg,#006600,#00ff00);
      border:none;color:#fff;font-weight:bold;font-size:1.45rem;border-radius:20px;cursor:pointer;
      box-shadow:0 0 70px rgba(0,255,0,1);transition:.5s;display:none;
    }
    .continue-btn:hover{transform:translateY(-8px);box-shadow:0 0 100px rgba(0,255,0,1);}

    /* آیتم‌ها — 3 بالا، 1 پایین */
    .products-grid{
      display:grid;grid-template-columns:repeat(3,1fr);gap:60px;max-width:1400px;margin:0 auto;padding:0 40px;
    }
    .products-grid .product-card:nth-child(4){grid-column:2;}

    .product-card{
      width:340px;height:520px;background:linear-gradient(135deg,#1a0000,#2d0000);border:6px solid #440000;
      border-radius:40px;overflow:hidden;cursor:pointer;transition:all .6s;box-shadow:0 30px 80px rgba(0,0,0,0.98);margin:0 auto;position:relative;
    }
    .product-card:hover{
      transform:translateY(-45px) scale(1.1);border-color:#ff3333;box-shadow:0 70px 160px rgba(255,0,0,1);
    }
    .product-card img{width:100%;height:100%;object-fit:cover;object-position:center;transition:.6s;}
    .product-card:hover img{transform:scale(1.4);filter:brightness(1.8) drop-shadow(0 0 70px #ff0000);}
    .product-info{
      position:absolute;bottom:100px;left:0;right:0;background:linear-gradient(transparent,#000000ee);
      padding:100px 25px 35px;text-align:center;z-index:2;
    }
    .product-info h3{color:var(--gold);font-size:1.45rem;margin-bottom:10px;text-shadow:0 0 30px #000;}
    .product-info .price{color:var(--accent);font-size:2rem;font-weight:bold;text-shadow:0 0 35px #ff0000;}

    /* فرم‌ها و مراحل */
    .step{display:none;}
    .step.active{display:block;}
    .main{padding-top:160px;}
    .form-box,.payment-box,.upload-box,.final-success{
      background:#111;padding:65px;border-radius:44px;border:6px solid #440000;max-width:880px;margin:90px auto;
      box-shadow:0 0 110px rgba(255,0,0,1);
    }
    .warning{background:#330000;border:5px solid #ff4444;padding:32px;border-radius:26px;margin:45px 0;color:#ffbbbb;display:flex;align-items:center;gap:28px;font-size:1.4rem;font-weight:bold;}
    input{width:100%;padding:26px;margin:20px 0;border-radius:26px;font-size:1.45rem;background:#222;border:3px solid #999;color:#fff;}
    .btn-primary{background:linear-gradient(45deg,#006600,#00ff00);border:none;color:#fff;font-weight:bold;padding:26px;font-size:1.8rem;border-radius:26px;cursor:pointer;box-shadow:0 0 90px rgba(0,255,0,1);transition:.5s;}
    .btn-primary:hover{transform:translateY(-12px);box-shadow:0 0 130px rgba(0,255,0,1);}

    .bank-card-img{width:100%;max-width:620px;margin:55px auto;display:block;border-radius:26px;box-shadow:0 45px 100px rgba(0,0,0,0.99);transition:.5s;cursor:zoom-in;}
    .bank-card-img:hover{transform:scale(1.12);box-shadow:0 0 140px rgba(255,30,30,1);}

    .timer{font-size:4rem;color:#ff0;font-weight:bold;text-align:center;margin:50px 0;}

    .final-success{text-align:center;background:linear-gradient(135deg,#001a00,#003300);border:9px solid #00ff00;animation:pulse 2s infinite;}
    @keyframes pulse{0%,100%{box-shadow:0 0 80px rgba(0,255,0,1);}50%{box-shadow:0 0 160px rgba(0,255,0,1);}}
    .transaction-code{background:#000;padding:28px;border-radius:22px;border:5px dashed #00ff00;margin:45px auto;display:inline-block;font-size:3.2rem;color:#0f0;font-weight:bold;letter-spacing:7px;cursor:pointer;}
    .copy-notif{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#0f0;color:#000;padding:30px 60px;border-radius:30px;font-size:2.4rem;font-weight:bold;z-index:9999;display:none;}

    .return-loader{position:fixed;inset:0;background:rgba(0,0,0,0.99);z-index:9999;display:none;flex-direction:column;align-items:center;justify-content:center;gap:45px;}
    .loader-spinner{width:150px;height:150px;border:15px solid #333;border-top:15px solid #0f0;border-radius:50%;animation:spin 1s linear infinite;}
    @keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}

    @media(max-width:1200px){.products-grid{grid-template-columns:repeat(2,1fr);}.products-grid .product-card:nth-child(4){grid-column:auto;}}
    @media(max-width:900px){.products-grid{grid-template-columns:1fr;}.cart-hud{top:100px;left:50%;transform:translateX(-50%);width:92%;max-width:480px;}.cart-icon{left:50%;transform:translateX(-50%);}}
  </style>
</head>
<body>

  <div class="particles" id="particles"></div>

  <!-- دکمه بازگشت بالا راست -->
  <a href="#" onclick="history.back();return false;" class="back-btn">
    بازگشت
  </a>

  <!-- آیکون سبد خرید جدید -->
  <div class="cart-icon" id="cartIcon">
    <svg viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="9" cy="21" r="1"></circle>
      <circle cx="20" cy="21" r="1"></circle>
      <path d="M1 1h4l2.5 12.5a2 2 0 0 0 2 1.5h10a2 2 0 0 0 2-1.5L23 6H6"></path>
    </svg>
  </div>

  <!-- سبد خرید بازشو -->
  <div class="cart-hud" id="cartHud">
    <h2>سبد خرید شما</h2>
    <div class="cart-items" id="cartItems">سبد خرید خالی است</div>
    <div class="cart-footer">
      <strong id="totalPrice">0</strong> تومان
      <button class="continue-btn" id="nextBtn" onclick="nextStep(2)">ادامه سفارش</button>
    </div>
  </div>

  <!-- لوگو پایین راست -->
  <div class="logo-fixed">
    <img src="https://i.imgur.com/XTaZBQw.png" alt="Nemino">
  </div>

  <!-- عنوان نئونی -->
  <div class="neon-title">GAME TIME WOW</div>

  <div class="main">
    <div class="step active" id="step1">
      <div class="products-grid" id="productGrid"></div>
    </div>

    <!-- مراحل بعدی (کامل و بدون تغییر) -->
    <div class="step" id="step2">
      <div class="form-box">
        <h2 style="color:var(--gold);text-align:center;margin-bottom:50px;">اطلاعات مشتری (همه الزامی)</h2>
        <div class="warning">
          مشتری گرامی در وارد کردن اطلاعات خود دقت کنید. در صورت اشتباه، سایت هیچ مسئولیتی ندارد.
        </div>
        <input type="text" id="fullname" placeholder="نام و نام خانوادگی" required>
        <input type="text" id="phone" placeholder="شماره موبایل (09123456789)" required>
        <input type="email" id="email" placeholder="ایمیل (الزامی)" required>
        <button class="btn-primary" onclick="nextStep(3)">ادامه به پرداخت</button>
      </div>
    </div>

    <div class="step" id="step3">
      <div class="payment-box">
        <h2 style="color:var(--gold);text-align:center;">پرداخت کارت به کارت</h2>
        <div class="timer" id="timer">02:00</div>
        <img src="https://nemino.ir/img/CartBank.png" class="bank-card-img">
        <h3 style="color:var(--accent);font-size:3.2rem;text-align:center;margin:50px 0;" id="payAmount">0 تومان</h3>
        <button class="btn-primary" onclick="nextStep(4)">تأیید پرداخت و ادامه</button>
      </div>
    </div>

    <div class="step" id="step4">
      <div class="upload-box">
        <h2 style="color:var(--gold);text-align:center;">آپلود اسکرین تراکنش</h2>
        <p style="text-align:center;margin:50px 0;font-size:1.8rem;">لطفاً عکس رسید تراکنش را آپلود کنید</p>
        <input type="file" id="screenshot" accept="image/*" required style="padding:45px;background:#222;border:8px dashed #aaa;border-radius:32px;">
        <button class="btn-primary" onclick="finalizeOrder()">تکمیل سفارش</button>
      </div>
    </div>

    <div class="step" id="step5">
      <div class="final-success">
        <h2 style="color:#0f0;font-size:5rem;margin-bottom:70px;">اطلاعات در حال بررسی هست</h2>
        <p style="font-size:2.4rem;color:#0f0;margin:45px 0;">شماره تراکنش شما:</p>
        <div class="transaction-code" id="finalOrderId" onclick="copyCode(this)">در حال تولید...</div>
        <p style="font-size:1.9rem;color:#aaa;margin:55px 0;">کد بالا با کلیک کپی می‌شود</p>
        <button class="btn-primary" onclick="goHome()">بازگشت به صفحه اصلی</button>
      </div>
    </div>
  </div>

  <div class="return-loader" id="returnLoader">
    <div class="loader-spinner"></div>
    <h2 style="color:#0f0;font-size:4rem;">در حال بازگشت به سایت...</h2>
    <p style="color:#aaa;font-size:2rem;">لطفاً صبر کنید</p>
  </div>

  <div class="copy-notif" id="copyNotif">کپی شد!</div>

  <script>
    for(let i=0;i<220;i++){
      const el=document.createElement('div');
      el.className = i<150 ? 'ash' : 'spark';
      el.style.left = Math.random()*100 + '%';
      el.style.animationDelay = Math.random()*20 + 's';
      document.getElementById('particles').appendChild(el);
    }

    const regionNames = {eu: 'اروپا', us: 'آمریکا', tk: 'ترکیه', uk: 'اوکراین'};
    const products = [
      {id:'eu',name:'گیم تایم ۳۰ روزه - اروپا',img:'https://nemino.ir/WOW/MidNight/30EU.png',price:3300000},
      {id:'us',name:'گیم تایم ۳۰ روزه - آمریکا',img:'https://nemino.ir/WOW/MidNight/30US.png',price:3010000},
      {id:'tk',name:'گیم تایم ۳۰ روزه - ترکیه',img:'https://nemino.ir/WOW/MidNight/30Tk.png',price:1500000},
      {id:'uk',name:'گیم تایم ۳۰ روزه - اوکراین',img:'https://nemino.ir/WOW/MidNight/30UK.png',price:1300000},
    ];

    let cart = {}, customer = {}, timer = null, finalOrderId = '';

    function renderProducts(){
      document.getElementById('productGrid').innerHTML = products.map(p=>`
        <div class="product-card" onclick="addToCart('${p.id}')">
          <img src="${p.img}" alt="${p.name}">
          <div class="product-info">
            <h3>${p.name}</h3>
            <div class="price">${p.price.toLocaleString('fa-IR')} تومان</div>
          </div>
        </div>
      `).join('');
    }

    function addToCart(id){
      cart[id] = (cart[id] || 0) + 1;
      updateCart();
      document.getElementById('nextBtn').style.display = 'block';
    }

    function updateCart(){
      const total = Object.entries(cart).reduce((a,[id,qty])=>a + products.find(p=>p.id===id).price*qty,0);
      document.getElementById('totalPrice').textContent = total.toLocaleString('fa-IR');
      document.getElementById('payAmount').textContent = total.toLocaleString('fa-IR') + ' تومان';

      const itemsDiv = document.getElementById('cartItems');
      if(Object.keys(cart).length===0){
        itemsDiv.innerHTML = 'سبد خرید خالی است';
        document.getElementById('nextBtn').style.display = 'none';
        return;
      }
      itemsDiv.innerHTML = Object.entries(cart).map(([id,qty])=>{
        const region = regionNames[id];
        return `<div class="cart-item">
          <img src="${products.find(p=>p.id===id).img}">
          <div class="cart-item-info">
            <strong>${region}</strong>
            <span>${qty} عدد</span>
          </div>
          <button class="trash-btn" onclick="removeFromCart('${id}')">حذف</button>
        </div>`;
      }).join('');
    }

    window.removeFromCart = function(id){
      delete cart[id];
      updateCart();
      if(Object.keys(cart).length===0) document.getElementById('nextBtn').style.display = 'none';
    };

    const cartIcon = document.getElementById('cartIcon');
    const cartHud = document.getElementById('cartHud');
    cartIcon.addEventListener('mouseenter', () => cartHud.classList.add('active'));
    cartHud.addEventListener('mouseleave', () => cartHud.classList.remove('active'));

    function nextStep(n){
      if(n===3){
        const f = document.getElementById('fullname').value.trim();
        const p = document.getElementById('phone').value.trim();
        const e = document.getElementById('email').value.trim();
        if(!f || !p || !e || !e.includes('@')){ alert('همه فیلدها الزامی و ایمیل باید معتبر باشد!'); return; }
        customer = {name:f, phone:p, email:e};
        startPaymentTimer();
      }
      document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
      document.getElementById('step'+n).classList.add('active');
    }

    function startPaymentTimer(){
      let time=120;
      timer=setInterval(()=>{
        time--;
        const m=Math.floor(time/60).toString().padStart(2,'0');
        const s=(time%60).toString().padStart(2,'0');
        document.getElementById('timer').textContent = m+':'+s;
        if(time<=0){ clearInterval(timer); alert('زمان پرداخت به پایان رسید!'); setTimeout(()=>location.href='https://nemino.ir',8000); }
      },1000);
    }

    function finalizeOrder(){
      if(!document.getElementById('screenshot').files[0]){ alert('لطفاً اسکرین تراکنش را آپلود کنید'); return; }
      clearInterval(timer);
      nextStep(5);

      finalOrderId = 'NM'+Date.now().toString(36).toUpperCase() + Math.random().toString(36).substr(2,4).toUpperCase();
      document.getElementById('finalOrderId').textContent = finalOrderId;

      const total = Object.entries(cart).reduce((a,[id,qty])=>a + products.find(p=>p.id===id).price*qty,0);
      const date = new Date().toLocaleString('fa-IR');

      setTimeout(()=>{
        const file = document.getElementById('screenshot').files[0];
        const reader = new FileReader();
        reader.onload = e=>{
          const productsList = Object.entries(cart).map(([id,qty])=>`• ${regionNames[id]} × ${qty}`).join('\n');
          const message = encodeURIComponent(
`سفارش جدید Nemino

کد سفارش: ${finalOrderId}
تاریخ و ساعت: ${date}
مشتری: ${customer.name}
موبایل: ${customer.phone}
ایمیل: ${customer.email}

محصولات:
${productsList}

مبلغ کل: ${total.toLocaleString('fa-IR')} تومان

[عکس اسکرین تراکنش در بالا]

ممنون از خریدتون. در حال بررسی هستیم و پس از تأیید تیم پشتیبانی باهاتون ارتباط میگیره (NEMINO)`);
          window.open(`https://wa.me/989379134101?text=${message}`, '_blank');
        };
        reader.readAsDataURL(file);
      },15000);
    }

    function copyCode(el){
      navigator.clipboard.writeText(el.textContent);
      const notif = document.getElementById('copyNotif');
      notif.style.display = 'block';
      setTimeout(()=>notif.style.display='none',1500);
    }

    function goHome(){
      document.getElementById('returnLoader').style.display = 'flex';
      setTimeout(()=>location.href='https://nemino.ir',15000);
    }

    window.addEventListener('focus', ()=>{
      if(document.visibilityState === 'visible' && document.getElementById('step5').classList.contains('active')){
        document.getElementById('returnLoader').style.display = 'flex';
        setTimeout(()=>location.href='https://nemino.ir',15000);
      }
    });

    renderProducts();
    updateCart();
  </script>
</body>
</html>
